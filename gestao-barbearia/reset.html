<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <title>Reinicializa√ß√£o do Sistema</title>
    <style>
        body {
            font-family: sans-serif;
            text-align: center;
            padding: 50px;
            background: #f0f0f0;
        }

        .box {
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        h1 {
            color: #d32f2f;
        }
    </style>
</head>

<body>
    <div class="box">
        <h1>üßπ Limpeza Profunda Executada</h1>
        <p>Service Workers removidos e Cache limpo.</p>
        <div id="status">Processando...</div>
        <br>
        <button onclick="window.location.href='index.html'" style="padding: 10px 20px; cursor: pointer;">Voltar para o
            Sistema</button>
    </div>

    <script>
        async function nuke() {
            const status = document.getElementById('status');

            // 1. Desregistrar Service Workers
            if (navigator.serviceWorker) {
                const registrations = await navigator.serviceWorker.getRegistrations();
                for (let registration of registrations) {
                    await registration.unregister();
                    console.log('SW Removido:', registration);
                }
            }

            // 2. Limpar Caches
            const keys = await caches.keys();
            for (let key of keys) {
                await caches.delete(key);
                console.log('Cache Deletado:', key);
            }

            // 3. Limpar LocalStorage (opcional, remove licen√ßa antiga bugada)
            // localStorage.clear(); // Descomente se quiser for√ßar novo login

            status.innerHTML = "‚úÖ Tudo limpo! O sistema baixar√° a vers√£o nova agora.";
        }
        nuke();
    </script>
</body>

</html>